/**
 * Script to add i18n translation keys for:
 * 1. Email admin files (admin.emails.*)
 * 2. Comptabilite isFr replacements (admin.accounting.*)
 * 3. Error pages (admin.errors.*)
 *
 * Run: node scripts/fix-i18n-emails-and-comptabilite.mjs
 */

import { readFileSync, writeFileSync } from 'fs';
import { join, dirname } from 'path';
import { fileURLToPath } from 'url';

const __dirname = dirname(fileURLToPath(import.meta.url));
const localesDir = join(__dirname, '..', 'src', 'i18n', 'locales');

// ============================================================================
// ALL NEW TRANSLATION KEYS
// ============================================================================

const newKeysFr = {
  admin: {
    emails: {
      campaigns: {
        title: "Campagnes Email",
        campaignCount: "campagne(s)",
        newCampaign: "Nouvelle campagne",
        campaignPrefix: "Campagne",
        newCampaignSubject: "Nouvelle campagne",
        confirmDelete: "Supprimer cette campagne?",
        confirmSend: "Envoyer cette campagne maintenant?",
        noCampaigns: "Aucune campagne",
        createFirstCampaign: "Creez votre premiere campagne email marketing",
        createCampaign: "Creer une campagne",
        subject: "Sujet",
        statsSent: "Envoyes",
        statsOpened: "Ouverts",
        statsClicked: "Cliques",
        statsBounced: "Rebonds",
        statsRevenue: "Revenus",
        send: "Envoyer",
        scheduled: "Planifie",
        sentAt: "Envoye",
        created: "Cree",
        statusDraft: "Brouillon",
        statusScheduled: "Planifiee",
        statusSending: "En envoi...",
        statusSent: "Envoyee",
        statusCancelled: "Annulee"
      },
      flows: {
        title: "Workflows d'automatisation",
        workflowCount: "workflow(s)",
        activeCount: "actif(s)",
        newWorkflow: "Nouveau workflow",
        noWorkflows: "Aucun workflow",
        createFirstWorkflow: "Creez votre premier workflow d'automatisation email",
        start: "Commencer",
        confirmDelete: "Supprimer ce workflow?",
        active: "Actif",
        inactive: "Inactif",
        activate: "Activer",
        deactivate: "Desactiver",
        delays: "delais",
        statsTriggered: "Declenche",
        statsSent: "Envoyes",
        statsOpened: "Ouverts",
        statsRevenue: "Revenus",
        modified: "Modifie",
        // FlowEditor
        nodeTrigger: "Declencheur",
        nodeEmail: "Email",
        nodeDelay: "Delai",
        nodeCondition: "Condition",
        nodeSms: "SMS",
        newEmail: "Nouvel email",
        wait: "Attendre",
        workflowNamePlaceholder: "Nom du workflow",
        triggerOrderCreated: "Commande creee",
        triggerOrderShipped: "Commande expediee",
        triggerOrderDelivered: "Commande livree",
        triggerCartAbandoned: "Panier abandonne",
        triggerUserRegistered: "Inscription",
        triggerBirthday: "Anniversaire",
        triggerWinback: "Reconquete",
        triggerReorder: "Reapprovisionnement",
        triggerReviewReceived: "Avis recu",
        triggerStockLow: "Stock bas",
        triggerStockBack: "Retour en stock",
        saving: "Sauvegarde...",
        save: "Sauvegarder",
        nodes: "Noeuds",
        properties: "Proprietes",
        label: "Label",
        emailSubject: "Sujet",
        htmlContent: "Contenu HTML",
        duration: "Duree",
        unit: "Unite",
        unitMinutes: "Minutes",
        unitHours: "Heures",
        unitDays: "Jours",
        unitWeeks: "Semaines",
        field: "Champ",
        operator: "Operateur",
        opEquals: "Egal a",
        opNotEquals: "Different de",
        opGreaterThan: "Plus grand que",
        opLessThan: "Plus petit que",
        opContains: "Contient",
        value: "Valeur",
        smsMessage: "Message SMS",
        deleteNode: "Supprimer ce noeud"
      },
      analytics: {
        title: "Analytiques Email",
        period7d: "7 jours",
        period30d: "30 jours",
        period90d: "90 jours",
        period1y: "1 an",
        emailsSent: "Emails envoyes",
        deliveryRate: "Taux livraison",
        bounces: "Rebonds",
        bounceRate: "Taux rebond",
        activeWorkflows: "Workflows actifs",
        campaignsCount: "campagne(s)",
        conversations: "Conversations",
        newConversations: "nouvelles",
        sendVolume: "Volume d'envois",
        chartSent: "Envoyes",
        chartBounced: "Rebonds",
        conversationsByStatus: "Conversations par statut",
        noConversations: "Aucune conversation",
        topTemplates: "Templates les plus utilises",
        noData: "Aucune donnee",
        recentActivity: "Activite recente"
      },
      inbox: {
        searchPlaceholder: "Rechercher emails, clients...",
        all: "Tous",
        new: "Nouveau",
        open: "Ouvert",
        pending: "En attente",
        resolved: "Resolu",
        noConversations: "Aucune conversation",
        unknown: "Inconnu",
        // ConversationThread
        notFound: "Conversation introuvable",
        back: "Retour",
        reply: "Reponse",
        internalNote: "Note interne",
        cancel: "Annuler",
        replyPlaceholder: "Ecrire votre reponse...",
        notePlaceholder: "Ajouter une note interne...",
        sending: "Envoi...",
        sendReply: "Envoyer",
        addNote: "Ajouter note",
        replyBtn: "Repondre",
        noteBtn: "Note",
        failed: "Echec",
        // activity messages
        activityStatusChanged: "Statut: {from} -> {to}",
        activityAssigned: "Assigne a un nouvel agent",
        activityPriorityChanged: "Priorite: {from} -> {to}",
        activityTagged: "Tags mis a jour",
        activityEmailReceived: "Nouvel email recu",
        activityReplied: "Reponse envoyee",
        activityNoted: "Note ajoutee",
        // relative time
        justNow: "a l'instant",
        // CustomerSidebar
        customer: "Client",
        french: "Francais",
        english: "English",
        customerSince: "Client depuis",
        orders: "Commandes",
        total: "Total",
        loyalty: "Fidelite",
        points: "points",
        recentOrders: "Commandes recentes"
      },
      segments: {
        title: "Segmentation Audience",
        totalUsers: "utilisateurs au total",
        rfmTitle: "Segmentation RFM (Recence, Frequence, Monetaire)",
        ofTotal: "du total",
        builtInSegments: "Segments integres",
        rfmInfoTitle: "Segmentation RFM: +320% de revenus",
        rfmInfoDescription: "Les campagnes ciblees par segment RFM generent 3.2x plus de revenus que les envois generiques. Utilisez les segments pour personaliser vos workflows et campagnes."
      },
      nodes: {
        condition: "Condition",
        yes: "Oui",
        no: "Non",
        delay: "Delai",
        email: "Email",
        subject: "Sujet",
        trigger: "Declencheur"
      }
    },
    errors: {
      adminPanelError: "Erreur du panneau d'administration",
      adminPanelErrorDescription: "Une erreur est survenue dans le panneau d'administration.",
      errorId: "ID d'erreur",
      tryAgain: "Reessayer",
      comptabiliteError: "Une erreur est survenue dans le module comptabilite",
      comptabiliteErrorDescription: "Veuillez reessayer. Si le probleme persiste, contactez le support technique.",
      technicalDetails: "Details techniques"
    },
    accounting: {
      // calendrier-fiscal isFr replacements
      fiscalCalendar: "Calendrier Fiscal",
      fiscalCalendarSubtitle: "Echeances et obligations CRA / Revenu Quebec",
      addEvent: "Ajouter un evenement",
      totalEvents: "Total evenements",
      pendingEvents: "En attente",
      completedEvents: "Completes",
      overdueEvents: "En retard",
      filters: "Filtres",
      year: "Annee",
      category: "Categorie",
      status: "Statut",
      noEvents: "Aucun evenement",
      noEventsFound: "Aucun evenement fiscal trouve",
      addEventsOrFilter: "Ajoutez des evenements ou modifiez vos filtres",
      daysOverdue: "{count}j en retard",
      today: "Aujourd'hui",
      daysLeft: "{count}j restants",
      reminder: "Rappel",
      markComplete: "Marquer complete",
      complete: "Completer",
      eventCompleted: "Evenement complete",
      errorUpdating: "Erreur lors de la mise a jour",
      titleAndDateRequired: "Titre et date requis",
      eventCreated: "Evenement cree",
      errorCreating: "Erreur lors de la creation",
      addFiscalEvent: "Ajouter un evenement fiscal",
      cancelBtn: "Annuler",
      createBtn: "Creer",
      titleEn: "Titre (EN)",
      titleFr: "Titre (FR)",
      dueDate: "Date d'echeance",
      reminderDate: "Date de rappel",
      authority: "Autorite",
      frequency: "Frequence",
      amount: "Montant ($)",
      recurringEvent: "Evenement recurrent",
      statusCompleted: "Complete",
      statusPending: "En attente",
      statusOverdue: "En retard",
      statusSkipped: "Ignore",
      // declaration-tps-tvq isFr replacements
      gstQstReturn: "Declaration TPS/TVQ",
      gstQstReturnSubtitle: "Calculez et soumettez votre declaration de taxes de vente",
      declarationPeriod: "Periode de declaration",
      startDate: "Date de debut",
      endDate: "Date de fin",
      method: "Methode",
      regular: "Reguliere",
      quick: "Rapide",
      calculating: "Calcul...",
      calculate: "Calculer",
      taxableSupplies: "Fournitures taxables",
      netGstHst: "TPS/TVH nette",
      netQst: "TVQ nette",
      refund: "Remboursement",
      amountOwing: "A remettre",
      amountDue: "Montant du",
      noBalance: "Aucun solde",
      supplies: "Fournitures",
      taxableSuppliesLabel: "Fournitures taxables",
      zeroRatedSupplies: "Fournitures detaxees",
      exemptSupplies: "Fournitures exonerees",
      totalSupplies: "Total fournitures",
      gstCollected: "TPS percue",
      itc: "CTI",
      netGst: "TPS nette",
      qstCollected: "TVQ percue",
      itr: "RTI",
      netQstLabel: "TVQ nette",
      quickMethod: "Methode rapide",
      totalRevenueInclTax: "Revenus totaux (taxes incl.)",
      quickRateGst: "Taux rapide TPS",
      quickRateQst: "Taux rapide TVQ",
      creditFirst30k: "Credit (premiers 30 000 $)",
      quickMethodRemittance: "Remise methode rapide",
      downloadPdf: "Telecharger PDF",
      exportCsv: "Exporter CSV",
      saveDraft: "Sauvegarder brouillon",
      submitDeclaration: "Soumettre la declaration",
      taxRatesByProvince: "Reference: Taux de taxe par province",
      hide: "Masquer",
      show: "Afficher",
      selectPeriodAndCalculate: "Selectionnez une periode et cliquez sur Calculer",
      dataFromJournalEntries: "Les donnees seront calculees a partir de vos ecritures comptables",
      confirmSubmission: "Confirmer la soumission",
      confirmSubmitDescription: "Etes-vous sur de vouloir soumettre cette declaration TPS/TVQ? Cette action enregistrera la declaration avec le statut \"Produite\".",
      period: "Periode",
      amountLabel: "Montant",
      submitting: "Soumission...",
      confirm: "Confirmer",
      declarationSubmitted: "Declaration soumise",
      draftSaved: "Brouillon sauvegarde",
      generatingPdf: "Generation PDF...",
      // immobilisations isFr replacements
      fixedAssets: "Immobilisations",
      fixedAssetsSubtitle: "Gestion des actifs immobilises et amortissement DPA",
      newAsset: "Nouvelle immobilisation",
      totalAssetsLabel: "Total actifs",
      acquisitionCost: "Cout d'acquisition",
      netBookValue: "Valeur comptable nette",
      totalDepreciation: "Amortissement cumule",
      searchAssets: "Rechercher un actif...",
      refresh: "Actualiser",
      allStatuses: "Tous les statuts",
      allCcaClasses: "Toutes les classes",
      statusActive: "Actif",
      statusDisposed: "Dispose",
      statusFullyDepreciated: "Entierement amorti",
      name: "Nom",
      ccaClass: "Classe DPA",
      cost: "Cout",
      bookValue: "Valeur comptable",
      accumulatedDepreciation: "Amort. cumule",
      noFixedAssetsFound: "Aucune immobilisation trouvee",
      edit: "Modifier",
      calculateCca: "Calculer DPA",
      dispose: "Disposer",
      depreciationHistory: "Historique d'amortissement",
      noDepreciationRecorded: "Aucun amortissement enregistre",
      yearLabel: "Annee",
      uccOpening: "UCC ouverture",
      uccClosing: "UCC fermeture",
      details: "Details",
      methodLabel: "Methode",
      halfYearRule: "Regle 50%",
      superDeduction: "Super deduction",
      assetAccount: "Compte actif",
      depreciationAccount: "Compte amort.",
      expenseAccount: "Compte charge",
      disposal: "Disposition",
      proceeds: "Produit",
      gainLoss: "Gain/Perte",
      editFixedAsset: "Modifier l'immobilisation",
      newFixedAsset: "Nouvelle immobilisation",
      cancelLabel: "Annuler",
      update: "Mettre a jour",
      create: "Creer",
      tabGeneral: "General",
      tabFinancial: "Financier",
      tabCcaOptions: "Options DPA",
      tabAccounts: "Comptes",
      assetNumber: "No Actif",
      description: "Description",
      optionalDescription: "Description optionnelle",
      serialNumber: "No Serie",
      location: "Emplacement",
      acquisitionDate: "Date d'acquisition",
      acquisitionCostLabel: "Cout d'acquisition ($)",
      residualValue: "Valeur residuelle ($)",
      ccaClassLabel: "Classe DPA",
      selectClass: "-- Choisir une classe --",
      ccaRate: "Taux DPA (%)",
      depreciationMethod: "Methode",
      decliningBalance: "Solde degressif",
      straightLine: "Lineaire",
      leaseTerm: "Duree du bail",
      halfYearRuleOption: "Regle de 50% (demi-annee)",
      halfYearRuleDesc: "Applique 50% du taux la premiere annee d'acquisition",
      aiiOption: "Incitatif a l'investissement accelere (IIA)",
      aiiDesc: "1.5x le taux normal la premiere annee (remplace la regle de 50%)",
      superDeductionOption: "Super deduction (100%)",
      superDeductionDesc: "Passation immediate en charges completes (Budget 2025)",
      gifiCode: "Code GIFI",
      assetAccountLabel: "Compte d'actif",
      accumulatedDepreciationAccount: "Compte d'amortissement cumule",
      depreciationExpenseAccount: "Compte de charge (amortissement)",
      selectAccount: "-- Choisir --",
      notes: "Notes",
      optionalNotes: "Notes optionnelles",
      disposeTitle: "Disposer de l'immobilisation",
      warning: "Attention",
      disposeWarning: "Vous allez disposer de \"{name}\" (valeur comptable: {value}). Cette action est irreversible.",
      disposalDate: "Date de disposition",
      disposalProceeds: "Produit de disposition ($)",
      estimatedGainLoss: "Gain/Perte estime",
      confirmDisposal: "Confirmer la disposition",
      calculateCcaTitle: "Calculer la DPA",
      classLabel: "Classe",
      fiscalYear: "Annee fiscale",
      periodStart: "Debut de periode",
      periodEnd: "Fin de periode",
      assetUpdated: "Immobilisation mise a jour",
      assetCreated: "Immobilisation creee",
      saveError: "Erreur lors de la sauvegarde",
      assetDisposed: "Immobilisation disposee",
      disposeError: "Erreur lors de la disposition",
      ccaCalculated: "DPA calculee",
      ccaCalculateError: "Erreur lors du calcul DPA",
      yes: "Oui",
      no: "Non",
      // parametres page - retention table locale === 'fr' replacements
      generalAccountingRecords: "Registres comptables generaux",
      t2Returns: "Declarations T2",
      gstQstRecords: "Registres TPS/TVQ",
      payrollRecords: "Registres de paie",
      t4Rl1Copies: "Copies T4/RL-1",
      roe: "RE",
      articlesOfIncorporation: "Acte constitutif",
      boardMinutes: "PV assemblees",
      shareRegister: "Registre actions",
      corporateLaw: "Droit corporatif"
    }
  }
};

const newKeysEn = {
  admin: {
    emails: {
      campaigns: {
        title: "Email Campaigns",
        campaignCount: "campaign(s)",
        newCampaign: "New campaign",
        campaignPrefix: "Campaign",
        newCampaignSubject: "New campaign",
        confirmDelete: "Delete this campaign?",
        confirmSend: "Send this campaign now?",
        noCampaigns: "No campaigns",
        createFirstCampaign: "Create your first email marketing campaign",
        createCampaign: "Create a campaign",
        subject: "Subject",
        statsSent: "Sent",
        statsOpened: "Opened",
        statsClicked: "Clicked",
        statsBounced: "Bounced",
        statsRevenue: "Revenue",
        send: "Send",
        scheduled: "Scheduled",
        sentAt: "Sent",
        created: "Created",
        statusDraft: "Draft",
        statusScheduled: "Scheduled",
        statusSending: "Sending...",
        statusSent: "Sent",
        statusCancelled: "Cancelled"
      },
      flows: {
        title: "Automation Workflows",
        workflowCount: "workflow(s)",
        activeCount: "active",
        newWorkflow: "New workflow",
        noWorkflows: "No workflows",
        createFirstWorkflow: "Create your first email automation workflow",
        start: "Get started",
        confirmDelete: "Delete this workflow?",
        active: "Active",
        inactive: "Inactive",
        activate: "Activate",
        deactivate: "Deactivate",
        delays: "delays",
        statsTriggered: "Triggered",
        statsSent: "Sent",
        statsOpened: "Opened",
        statsRevenue: "Revenue",
        modified: "Modified",
        nodeTrigger: "Trigger",
        nodeEmail: "Email",
        nodeDelay: "Delay",
        nodeCondition: "Condition",
        nodeSms: "SMS",
        newEmail: "New email",
        wait: "Wait",
        workflowNamePlaceholder: "Workflow name",
        triggerOrderCreated: "Order created",
        triggerOrderShipped: "Order shipped",
        triggerOrderDelivered: "Order delivered",
        triggerCartAbandoned: "Cart abandoned",
        triggerUserRegistered: "Registration",
        triggerBirthday: "Birthday",
        triggerWinback: "Win-back",
        triggerReorder: "Reorder due",
        triggerReviewReceived: "Review received",
        triggerStockLow: "Low stock",
        triggerStockBack: "Back in stock",
        saving: "Saving...",
        save: "Save",
        nodes: "Nodes",
        properties: "Properties",
        label: "Label",
        emailSubject: "Subject",
        htmlContent: "HTML Content",
        duration: "Duration",
        unit: "Unit",
        unitMinutes: "Minutes",
        unitHours: "Hours",
        unitDays: "Days",
        unitWeeks: "Weeks",
        field: "Field",
        operator: "Operator",
        opEquals: "Equals",
        opNotEquals: "Not equals",
        opGreaterThan: "Greater than",
        opLessThan: "Less than",
        opContains: "Contains",
        value: "Value",
        smsMessage: "SMS Message",
        deleteNode: "Delete this node"
      },
      analytics: {
        title: "Email Analytics",
        period7d: "7 days",
        period30d: "30 days",
        period90d: "90 days",
        period1y: "1 year",
        emailsSent: "Emails sent",
        deliveryRate: "Delivery rate",
        bounces: "Bounces",
        bounceRate: "Bounce rate",
        activeWorkflows: "Active workflows",
        campaignsCount: "campaign(s)",
        conversations: "Conversations",
        newConversations: "new",
        sendVolume: "Send volume",
        chartSent: "Sent",
        chartBounced: "Bounced",
        conversationsByStatus: "Conversations by status",
        noConversations: "No conversations",
        topTemplates: "Most used templates",
        noData: "No data",
        recentActivity: "Recent activity"
      },
      inbox: {
        searchPlaceholder: "Search emails, customers...",
        all: "All",
        new: "New",
        open: "Open",
        pending: "Pending",
        resolved: "Resolved",
        noConversations: "No conversations",
        unknown: "Unknown",
        notFound: "Conversation not found",
        back: "Back",
        reply: "Reply",
        internalNote: "Internal note",
        cancel: "Cancel",
        replyPlaceholder: "Write your reply...",
        notePlaceholder: "Add an internal note...",
        sending: "Sending...",
        sendReply: "Send",
        addNote: "Add note",
        replyBtn: "Reply",
        noteBtn: "Note",
        failed: "Failed",
        activityStatusChanged: "Status: {from} -> {to}",
        activityAssigned: "Assigned to a new agent",
        activityPriorityChanged: "Priority: {from} -> {to}",
        activityTagged: "Tags updated",
        activityEmailReceived: "New email received",
        activityReplied: "Reply sent",
        activityNoted: "Note added",
        justNow: "just now",
        customer: "Customer",
        french: "French",
        english: "English",
        customerSince: "Customer since",
        orders: "Orders",
        total: "Total",
        loyalty: "Loyalty",
        points: "points",
        recentOrders: "Recent orders"
      },
      segments: {
        title: "Audience Segmentation",
        totalUsers: "total users",
        rfmTitle: "RFM Segmentation (Recency, Frequency, Monetary)",
        ofTotal: "of total",
        builtInSegments: "Built-in segments",
        rfmInfoTitle: "RFM Segmentation: +320% revenue",
        rfmInfoDescription: "RFM-targeted campaigns generate 3.2x more revenue than generic sends. Use segments to personalize your workflows and campaigns."
      },
      nodes: {
        condition: "Condition",
        yes: "Yes",
        no: "No",
        delay: "Delay",
        email: "Email",
        subject: "Subject",
        trigger: "Trigger"
      }
    },
    errors: {
      adminPanelError: "Admin Panel Error",
      adminPanelErrorDescription: "An error occurred in the admin panel.",
      errorId: "Error ID",
      tryAgain: "Try again",
      comptabiliteError: "An error occurred in the accounting module",
      comptabiliteErrorDescription: "Please try again. If the problem persists, contact technical support.",
      technicalDetails: "Technical details"
    },
    accounting: {
      fiscalCalendar: "Fiscal Calendar",
      fiscalCalendarSubtitle: "CRA / Revenu Quebec deadlines and obligations",
      addEvent: "Add Event",
      totalEvents: "Total Events",
      pendingEvents: "Pending",
      completedEvents: "Completed",
      overdueEvents: "Overdue",
      filters: "Filters",
      year: "Year",
      category: "Category",
      status: "Status",
      noEvents: "No Events",
      noEventsFound: "No fiscal events found",
      addEventsOrFilter: "Add events or adjust your filters",
      daysOverdue: "{count}d overdue",
      today: "Today",
      daysLeft: "{count}d left",
      reminder: "Reminder",
      markComplete: "Mark complete",
      complete: "Complete",
      eventCompleted: "Event completed",
      errorUpdating: "Error updating event",
      titleAndDateRequired: "Title and date required",
      eventCreated: "Event created",
      errorCreating: "Error creating event",
      addFiscalEvent: "Add Fiscal Event",
      cancelBtn: "Cancel",
      createBtn: "Create",
      titleEn: "Title (EN)",
      titleFr: "Title (FR)",
      dueDate: "Due Date",
      reminderDate: "Reminder Date",
      authority: "Authority",
      frequency: "Frequency",
      amount: "Amount ($)",
      recurringEvent: "Recurring event",
      statusCompleted: "Completed",
      statusPending: "Pending",
      statusOverdue: "Overdue",
      statusSkipped: "Skipped",
      gstQstReturn: "GST/QST Return",
      gstQstReturnSubtitle: "Calculate and submit your sales tax declaration",
      declarationPeriod: "Declaration Period",
      startDate: "Start date",
      endDate: "End date",
      method: "Method",
      regular: "Regular",
      quick: "Quick",
      calculating: "Calculating...",
      calculate: "Calculate",
      taxableSupplies: "Taxable Supplies",
      netGstHst: "Net GST/HST",
      netQst: "Net QST",
      refund: "Refund",
      amountOwing: "Amount owing",
      amountDue: "Amount owing",
      noBalance: "No balance",
      supplies: "Supplies",
      taxableSuppliesLabel: "Taxable supplies",
      zeroRatedSupplies: "Zero-rated supplies",
      exemptSupplies: "Exempt supplies",
      totalSupplies: "Total supplies",
      gstCollected: "GST collected",
      itc: "ITC",
      netGst: "Net GST",
      qstCollected: "QST collected",
      itr: "ITR",
      netQstLabel: "Net QST",
      quickMethod: "Quick Method",
      totalRevenueInclTax: "Total revenue (incl. taxes)",
      quickRateGst: "Quick rate GST",
      quickRateQst: "Quick rate QST",
      creditFirst30k: "Credit (first $30,000)",
      quickMethodRemittance: "Quick method remittance",
      downloadPdf: "Download PDF",
      exportCsv: "Export CSV",
      saveDraft: "Save Draft",
      submitDeclaration: "Submit Declaration",
      taxRatesByProvince: "Reference: Tax Rates by Province",
      hide: "Hide",
      show: "Show",
      selectPeriodAndCalculate: "Select a period and click Calculate",
      dataFromJournalEntries: "Data will be calculated from your journal entries",
      confirmSubmission: "Confirm Submission",
      confirmSubmitDescription: "Are you sure you want to submit this GST/QST declaration? This will record the declaration with \"Filed\" status.",
      period: "Period",
      amountLabel: "Amount",
      submitting: "Submitting...",
      confirm: "Confirm",
      declarationSubmitted: "Declaration submitted",
      draftSaved: "Draft saved",
      generatingPdf: "Generating PDF...",
      fixedAssets: "Fixed Assets",
      fixedAssetsSubtitle: "Fixed asset management and CCA depreciation",
      newAsset: "New Asset",
      totalAssetsLabel: "Total Assets",
      acquisitionCost: "Acquisition Cost",
      netBookValue: "Net Book Value",
      totalDepreciation: "Total Depreciation",
      searchAssets: "Search assets...",
      refresh: "Refresh",
      allStatuses: "All Statuses",
      allCcaClasses: "All CCA Classes",
      statusActive: "Active",
      statusDisposed: "Disposed",
      statusFullyDepreciated: "Fully depreciated",
      name: "Name",
      ccaClass: "CCA Class",
      cost: "Cost",
      bookValue: "Book Value",
      accumulatedDepreciation: "Accum. Depr.",
      noFixedAssetsFound: "No fixed assets found",
      edit: "Edit",
      calculateCca: "Calculate CCA",
      dispose: "Dispose",
      depreciationHistory: "Depreciation History",
      noDepreciationRecorded: "No depreciation recorded",
      yearLabel: "Year",
      uccOpening: "UCC opening",
      uccClosing: "UCC closing",
      details: "Details",
      methodLabel: "Method",
      halfYearRule: "Half-Year Rule",
      superDeduction: "Super Deduction",
      assetAccount: "Asset Account",
      depreciationAccount: "Depr. Account",
      expenseAccount: "Expense Account",
      disposal: "Disposal",
      proceeds: "Proceeds",
      gainLoss: "Gain/Loss",
      editFixedAsset: "Edit Fixed Asset",
      newFixedAsset: "New Fixed Asset",
      cancelLabel: "Cancel",
      update: "Update",
      create: "Create",
      tabGeneral: "General",
      tabFinancial: "Financial",
      tabCcaOptions: "CCA Options",
      tabAccounts: "Accounts",
      assetNumber: "Asset No.",
      description: "Description",
      optionalDescription: "Optional description",
      serialNumber: "Serial Number",
      location: "Location",
      acquisitionDate: "Acquisition Date",
      acquisitionCostLabel: "Acquisition Cost ($)",
      residualValue: "Residual Value ($)",
      ccaClassLabel: "CCA Class",
      selectClass: "-- Select a class --",
      ccaRate: "CCA Rate (%)",
      depreciationMethod: "Method",
      decliningBalance: "Declining Balance",
      straightLine: "Straight Line",
      leaseTerm: "Lease Term",
      halfYearRuleOption: "Half-Year Rule",
      halfYearRuleDesc: "Applies 50% of the rate in the first year of acquisition",
      aiiOption: "Accelerated Investment Incentive (AII)",
      aiiDesc: "1.5x the normal rate in the first year (replaces half-year rule)",
      superDeductionOption: "Super Deduction (100%)",
      superDeductionDesc: "100% immediate expensing (Budget 2025)",
      gifiCode: "GIFI Code",
      assetAccountLabel: "Asset Account",
      accumulatedDepreciationAccount: "Accumulated Depreciation Account",
      depreciationExpenseAccount: "Depreciation Expense Account",
      selectAccount: "-- Select --",
      notes: "Notes",
      optionalNotes: "Optional notes",
      disposeTitle: "Dispose Fixed Asset",
      warning: "Warning",
      disposeWarning: "You are about to dispose of \"{name}\" (book value: {value}). This action is irreversible.",
      disposalDate: "Disposal Date",
      disposalProceeds: "Disposal Proceeds ($)",
      estimatedGainLoss: "Estimated Gain/Loss",
      confirmDisposal: "Confirm Disposal",
      calculateCcaTitle: "Calculate CCA",
      classLabel: "Class",
      fiscalYear: "Fiscal Year",
      periodStart: "Period Start",
      periodEnd: "Period End",
      assetUpdated: "Fixed asset updated",
      assetCreated: "Fixed asset created",
      saveError: "Error saving",
      assetDisposed: "Fixed asset disposed",
      disposeError: "Error disposing asset",
      ccaCalculated: "CCA calculated",
      ccaCalculateError: "Error calculating CCA",
      yes: "Yes",
      no: "No",
      generalAccountingRecords: "General accounting records",
      t2Returns: "T2 corporate returns",
      gstQstRecords: "GST/QST records",
      payrollRecords: "Payroll records",
      t4Rl1Copies: "T4/RL-1 copies",
      roe: "ROE",
      articlesOfIncorporation: "Articles of incorporation",
      boardMinutes: "Board minutes",
      shareRegister: "Share register",
      corporateLaw: "Corporate law"
    }
  }
};

// ============================================================================
// DEEP MERGE UTILITY
// ============================================================================

function deepMerge(target, source) {
  for (const key of Object.keys(source)) {
    if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
      if (!target[key] || typeof target[key] !== 'object') {
        target[key] = {};
      }
      deepMerge(target[key], source[key]);
    } else {
      // Only set if key doesn't already exist (don't overwrite)
      if (target[key] === undefined) {
        target[key] = source[key];
      }
    }
  }
  return target;
}

// ============================================================================
// MAIN
// ============================================================================

const localeFiles = [
  'en.json', 'fr.json',
  'ar.json', 'ar-dz.json', 'ar-lb.json', 'ar-ma.json',
  'de.json', 'es.json', 'gcr.json', 'hi.json', 'ht.json',
  'it.json', 'ko.json', 'pa.json', 'pl.json', 'pt.json',
  'ru.json', 'sv.json', 'ta.json', 'tl.json', 'vi.json', 'zh.json',
];

let totalKeysAdded = 0;

for (const file of localeFiles) {
  const filePath = join(localesDir, file);
  const data = JSON.parse(readFileSync(filePath, 'utf-8'));

  if (file === 'fr.json') {
    deepMerge(data, newKeysFr);
  } else if (file === 'en.json') {
    deepMerge(data, newKeysEn);
  } else {
    // For all other locales, use English fallback
    deepMerge(data, newKeysEn);
  }

  writeFileSync(filePath, JSON.stringify(data, null, 2) + '\n', 'utf-8');
  console.log(`Updated ${file}`);
  totalKeysAdded++;
}

console.log(`\nDone! Updated ${totalKeysAdded} locale files.`);
console.log(`French keys added under: admin.emails.*, admin.errors.*, admin.accounting.*`);
console.log(`English keys added to en.json and all other locales as fallback.`);
